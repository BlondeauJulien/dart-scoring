(this["webpackJsonpdart-scoring"]=this["webpackJsonpdart-scoring"]||[]).push([[0],Array(21).concat([function(e,a,t){e.exports=t.p+"static/media/spinner.078aa3f0.gif"},function(e,a,t){e.exports=t.p+"static/media/dartboard.41b0b1f4.png"},function(e,a,t){e.exports=t(46)},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(13),c=t.n(l),o=(t(28),t(11)),m=t(9),u=(t(29),function(e){return n.a.createElement("header",{className:"main-header"},e.children)}),s=(t(30),function(){return n.a.createElement("ul",{className:"nav-links"},n.a.createElement("li",null,n.a.createElement(o.b,{to:"/stat"}," STATS")),n.a.createElement("li",null,n.a.createElement(o.b,{to:"/about"}," ABOUT ")))}),T=(t(36),function(e){return n.a.createElement(u,null,n.a.createElement("h1",{className:"main-navigation__title"},"DARTS 501 SCORING"),n.a.createElement("nav",null,n.a.createElement(s,null)))}),i=t(7),h=t(3),y=t(1),d=t(2),D=function(e){var a;return"input"===e.element&&(a=n.a.createElement("input",{type:e.type,className:"  ".concat(e.hidden&&"display-none"),name:e.name,value:e.value,placeholder:e.placeholder,checked:e.checked,onChange:e.onChange,minLength:e.minLength,maxLength:e.maxLength,required:e.required})),"select"===e.element&&(a=n.a.createElement("select",{name:e.name,value:e.value,onChange:e.onChange,required:!0},e.children)),n.a.createElement(r.Fragment,null,n.a.createElement("label",{htmlFor:e.htmlFor},e.label),a)},p={gameTypeValues:[101,301,501,701,1001],setOptionsValues:Array.from(Array(11),(function(e,a){return a+1})),legOptionsValues:Array.from(Array(11),(function(e,a){return a+1})),numberOfPlayers:Array.from(Array(4),(function(e,a){return a+1}))},E=(t(37),function(e){var a;e.isForm&&(a=n.a.createElement("form",{onSubmit:e.onSubmit,className:"modal__content ".concat(e.contentClass)},e.children,n.a.createElement("footer",{className:"modal__footer ".concat(e.footerClass)},e.footer))),e.isDiv&&(a=n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"modal__content ".concat(e.contentClass)},e.children),n.a.createElement("footer",{className:"modal__footer ".concat(e.footerClass)},e.footer)));var t=n.a.createElement("div",{className:"modal__background"},n.a.createElement("div",{className:"modal ".concat(e.className),style:e.style},n.a.createElement("header",{className:"modal__header ".concat(e.headerClass)},n.a.createElement("h2",null,e.header)),a));return c.a.createPortal(t,document.getElementById("modal-hook"))}),S=(t(38),t(21)),f=t.n(S),b=function(e){return n.a.createElement("div",{className:e.spinnerContClassName},n.a.createElement("img",{src:f.a,className:e.spinnerImgClassName,alt:"loading"}))},g={matchModel:{gameIsRunning:!1,gameType:void 0,isSoloGame:void 0,hasWinner:!1,sets:void 0,legs:void 0,players:[],startingPlayerLeg:0,startingPlayerSet:0,currentPlayerTurn:0,currentThrow:["","",""],currentLegThrows:[],allLegsThrows:[],matchPlayerInfo:{}},playerMatchModel:{hasWonMatch:!1,score:null,setWon:0,currentSetLegWon:0,totalThrow:{darts:0,rounds:0},totalThrowEndGame:{darts:0,rounds:0},totalThrowBegMidGame:{darts:0,rounds:0},bestThreeDarts:0,hit:{},scoreRanges:{},averages:{overall:0,begMidGame:0,endGame:0},doubleOut:{},checkoutScores:{}},playerModel:{name:"",nbrOfMatches:0,matchesWon:0,soloGames:0,totalThrow:{darts:0,rounds:0},totalThrowEndGame:{darts:0,rounds:0},totalThrowBegMidGame:{darts:0,rounds:0},bestThreeDarts:0,hit:{},scoreRanges:{},averages:{overall:0,begMidGame:0,endGame:0},doubleOut:{},checkoutScores:{},matches:[]}},O=function(){return JSON.parse(localStorage.getItem("darts501scoring"))},v=function(e){return localStorage.setItem("darts501scoring",JSON.stringify(e))},P={createPlayer:function(e){var a=O();a[e]=g.playerModel,a[e].name=e,v(a)},updatePlayer:function(e,a){var t=O();t[e]=a,v(t)},getAllPlayersName:function(){var e;e="darts501scoring",localStorage.getItem(e)||v({});var a=O();return Object.keys(a)},getSinglePlayerData:function(e){return O()[e]}},j=Object(r.createContext)(),N=(t(39),function(){var e=Object(m.f)(),a=Object(r.useContext)(j),t=p.gameTypeValues,l=p.setOptionsValues,c=p.legOptionsValues,o=p.numberOfPlayers,u=Object(r.useState)(!1),s=Object(d.a)(u,2),T=s[0],S=s[1],f=Object(r.useState)(""),O=Object(d.a)(f,2),v=O[0],N=O[1],_=Object(r.useState)(null),w=Object(d.a)(_,2),I=w[0],R=w[1],C=Object(r.useState)({gameType:501,sets:1,legs:1,numberOfPlayers:2,players:["",""]}),G=Object(d.a)(C,2),A=G[0],k=G[1];Object(r.useEffect)((function(){new Set(A.players).size===A.players.length&&R(null);var e=setTimeout((function(){R(null)}),1e4);return function(){clearTimeout(e)}}),[I,A.players]);var L=function(e){"numberOfPlayers"===e.target.name?k(Object(y.a)({},A,{numberOfPlayers:Number(e.target.value),players:Array(Number(e.target.value)).fill("")})):k(Object(y.a)({},A,Object(h.a)({},e.target.name,Number(e.target.value))))};return a.match.gameIsRunning&&!a.loading.initGameLoading?n.a.createElement("p",null,"A game is running"):a.loading.initGameLoading?n.a.createElement(b,{spinnerContClassName:"spinner-cont-large",spinnerImgClassName:"spinnerSmall"}):n.a.createElement(r.Fragment,null,T&&n.a.createElement(E,{isForm:!0,header:"Add a new player",onSubmit:function(e){e.preventDefault(),P.createPlayer(v),N("")},footer:n.a.createElement(r.Fragment,null,n.a.createElement("button",{type:"submit"},"Create Player"),n.a.createElement("button",{onClick:function(){return S(!1)}},"Go Back"))},n.a.createElement(D,{element:"input",type:"text",name:"newPlayerName",value:v,htmlFor:"newPlayerName",label:"Player Name:",onChange:function(e){return N(e.target.value)},minLength:2,maxLength:12,required:!0})),n.a.createElement("form",{className:"start-game-form",onSubmit:function(t){if(t.preventDefault(),new Set(A.players).size!==A.players.length)R("Each player should be unique.");else{var r=Object(y.a)({},A);r.isSoloGame=1===Number(r.numberOfPlayers),r.gameIsRunning=!0,r.matchPlayerInfo={},r.players.forEach((function(e){var a=Object(y.a)({},g.playerMatchModel);a.score=Number(r.gameType),r.matchPlayerInfo[e]=a})),a.initNewGame(r),e.push("/game")}}},n.a.createElement("div",{className:"input-cont"},n.a.createElement("label",null,"Game"),n.a.createElement("div",{className:"input-cont__type"},t.map((function(e){return n.a.createElement(D,{key:"game-type-".concat(e),element:"input",type:"radio",name:"gameType",value:e,htmlFor:e,label:e,checked:Number(A.gameType)===Number(e),onChange:L,required:!0})})))),n.a.createElement("div",{className:"input-cont input-cont__sets"},n.a.createElement(D,{element:"select",name:"sets",htmlFor:"set",label:"First to win",value:A.sets,onChange:L},l.map((function(e){return n.a.createElement("option",{key:"set-option-".concat(e),value:e},e," set",e>1&&"s")}))),n.a.createElement(D,{element:"select",name:"legs",htmlFor:"leg",label:"Of",value:A.legs,onChange:L},c.map((function(e){return n.a.createElement("option",{key:"leg-option-".concat(e),value:e},e," leg",e>1&&"s"," (to win)")})))),n.a.createElement("div",{className:"input-cont"},n.a.createElement("label",null,"Number of players"),n.a.createElement("div",{className:"input-cont__player-nbr"},o.map((function(e){return n.a.createElement(D,{key:"player-nbr-".concat(e),element:"input",type:"radio",name:"numberOfPlayers",value:e,htmlFor:e,label:1===e?"Solo":e+" Players",checked:Number(A.numberOfPlayers)===Number(e),onChange:L,required:!0})})))),n.a.createElement("div",{className:"input-cont"},n.a.createElement("label",null,"Who is playing?"),n.a.createElement("div",null,n.a.createElement("h3",null,"New Player or not in the list?"),n.a.createElement("button",{type:"button",onClick:function(){return S(!0)}},"Create a new player")),A.players.map((function(e,a){return n.a.createElement("div",{key:"player-".concat(a+1)},n.a.createElement("div",null,n.a.createElement(D,{element:"select",name:"players-names",htmlFor:"playersNames",label:"Player ".concat(a+1),value:A.players[a],onChange:function(e){return function(e,a){var t=Object(i.a)(A.players).map((function(t,r){return r===a?e:t}));k(Object(y.a)({},A,{players:t}))}(e.target.value,a)}},n.a.createElement("option",{value:""}," - Pick Player ",a+1," - "),P.getAllPlayersName().map((function(e){return n.a.createElement("option",{key:"player-name-".concat(e),value:e},e)})))))}))),n.a.createElement("button",{type:"submit"},"START"),I&&n.a.createElement("div",null,n.a.createElement("p",null,I))))}),_=(t(40),function(e){var a=e.playerName,t=e.infos,r=t.score,l=t.setWon,c=t.averages,o=t.currentSetLegWon,m=t.bestThreeDarts;return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("h3",null,a),n.a.createElement("span",null,r)),n.a.createElement("div",null,n.a.createElement("table",null,n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Set:"),n.a.createElement("td",null,l)),n.a.createElement("tr",null,n.a.createElement("th",null,"Leg:"),n.a.createElement("td",null,o)),n.a.createElement("tr",null,n.a.createElement("th",null,"Average:"),n.a.createElement("td",null,Math.round(c.overall))),n.a.createElement("tr",null,n.a.createElement("th",null,"Best:"),n.a.createElement("td",null,m))))))}),w=(t(41),function(e){var a=Object(r.useContext)(j).match;return n.a.createElement("div",null,Object.entries(a.matchPlayerInfo).map((function(e){var a=Object(d.a)(e,2),t=a[0],r=a[1];return n.a.createElement(_,{key:"player-item-".concat(t),playerName:t,infos:r})})))}),I=function(e){var a=e.averages,t=e.bestThreeDarts;return n.a.createElement("div",null,n.a.createElement("h3",null,"Averages and best"),n.a.createElement("div",null,n.a.createElement("p",null,"Overall average:"),n.a.createElement("p",null,Math.round(a.overall))),n.a.createElement("div",null,n.a.createElement("p",null,"Begining and Mid game average:"),n.a.createElement("p",null,Math.round(a.begMidGame))),n.a.createElement("div",null,n.a.createElement("p",null,"End game average:"),n.a.createElement("p",null,Math.round(a.endGame))),n.a.createElement("div",null,n.a.createElement("p",null,"Best three darts score:"),n.a.createElement("p",null,t)))},R=function(e){var a=e.title,t=e.object,r=e.isDoubleOut,l=e.totalThrow,c=e.displayPercentage;return r?n.a.createElement("div",null,n.a.createElement("h3",null,a),Object.entries(t).map((function(e){var a=Object(d.a)(e,2),r=a[0],l=a[1];return n.a.createElement("div",{key:"stat-".concat(t,"-").concat(r)},n.a.createElement("p",null,"D",r,":"),n.a.createElement("p",null,l.hit," /",l.total," (",100*l.hit/l.total,"%)"))}))):n.a.createElement("div",null,n.a.createElement("h3",null,a),Object.entries(t).map((function(e){var a=Object(d.a)(e,2),r=a[0],o=a[1];return n.a.createElement("div",{key:"stat-".concat(t,"-").concat(r)},n.a.createElement("p",null,r,":"),n.a.createElement("p",null,o," ",c&&"(".concat(Math.round(100*o/l),"%)")))})))},C=function(e){var a=e.currentPlayerInfos,t=a.averages,r=a.bestThreeDarts,l=a.scoreRanges,c=a.doubleOut,o=a.checkoutScores;return n.a.createElement("div",null,n.a.createElement(I,{averages:t,bestThreeDarts:r}),Object.keys(l).length>0&&n.a.createElement(R,{title:"Score ranges:",object:l}),Object.keys(c).length>0&&n.a.createElement(R,{title:"Double Out success rate:",object:c,isDoubleOut:!0}),Object.keys(o).length>0&&n.a.createElement(R,{title:"Successful checkout score:",object:o}))},G=P.getSinglePlayerData,A=function(e,a,t){var r=Object(y.a)({},e),n=Object(y.a)({},a);return Object.keys(r[t]).forEach((function(e){n[t].hasOwnProperty(e)?n[t][e]+=r[t][e]:n[t][e]=r[t][e]})),n[t]},k=function(e,a,t,r){return 0===r?e:(console.log("start"),console.log("currentAvg: "+e),console.log("currentTotalThrow: "+a),console.log("matchAvg: "+t),console.log("totalMatchThrow: "+r),(e*a+t*r)/(a+r))},L=function(e,a){var t=new Date;e.players.forEach((function(r){var n=Object(y.a)({},e.matchPlayerInfo[r]),l=G(r);n.date=t,n.players=e.players,n.playerWinner=a,n.gameType=e.gameType,n.matchLegsInfos=e.allLegsThrows,l.matches.push(n),l.nbrOfMatches++,r===a&&e.players.length>1&&l.matchesWon++,1===e.players.length&&l.soloGames++,l.averages.overall=k(l.averages.overall,l.totalThrow.rounds,n.averages.overall,n.totalThrow.rounds),l.averages.begMidGame=k(l.averages.begMidGame,l.totalThrowBegMidGame.rounds,n.averages.begMidGame,n.totalThrowBegMidGame.rounds),l.averages.endGame=k(l.averages.endGame,l.totalThrowEndGame.rounds,n.averages.endGame,n.totalThrowEndGame.rounds),l.totalThrow.darts+=n.totalThrow.darts,l.totalThrow.rounds+=n.totalThrow.rounds,l.totalThrowEndGame.darts+=n.totalThrowEndGame.darts,l.totalThrowEndGame.rounds+=n.totalThrowEndGame.rounds,l.totalThrowBegMidGame.darts+=n.totalThrowBegMidGame.darts,l.totalThrowBegMidGame.rounds+=n.totalThrowBegMidGame.rounds,l.bestThreeDarts=Math.max(l.bestThreeDarts,n.bestThreeDarts),l.doubleOut=A(n,l,"doubleOut"),l.hit=A(n,l,"hit"),l.scoreRanges=A(n,l,"scoreRanges"),l.checkoutScores=A(n,l,"checkoutScores"),P.updatePlayer(r,l)}))},M={170:["T20-T20-D25"],169:["---No checkout---","Suggestion:","T19-T20-S12 leaves 40","T19-T19-S19 leaves 36"],168:["---No checkout---","Suggestion:","T20-T20 leaves 48, then pick S8 or S16"],167:["T20-T19-D25","note:","S20-T20-T17 leaves 36"],166:["---No checkout---","Suggestion:","T20-T20-S6 leaves 40","S20-T19-T19 leaves 32"],165:["---No checkout---","Suggestion:","T20-T19-S8 leaves 40","T20-S20-T15 leaves 40","T20-T20-S13 leaves 32"],164:["T19-T19-D25","T20-T18-D25","note:","T20-S19-T15 leaves 40"],163:["---No checkout---","Suggestion:","T20-T19-S6 leaves 40","T20-S20-T17 leaves 32"],162:["---No checkout---","Suggestion:","T20-T20-S10 leaves 32","S20-T20-T14 leaves 40"],161:["T20-T17-D25","T19-T18-D25","note:","S20-T20-T19 leaves 24"],160:["T20-T20-D20"],159:["---No checkout---","Suggestion:","T19-T20-S10 leaves 32"],158:["T20-T20-D19","T18-T18-D25"],157:["T20-T19-D20"],156:["T20-T20-D18"],155:["T20-T19-D19"],154:["T19-T19-D20","T20-T18-D20","T20-T20-D17"],153:["T20-T19-D18"],152:["T20-T20-D16"],151:["T20-T17-D20","T19-T18-D20"],150:["T19-T19-D18","T20-T18-D18","T20-T20-D15"],149:["T20-T19-D16"],148:["T20-T20-D14","T20-T16-D20","T18-T18-D20","T19-T17-D20"],147:["T20-T17-D18","T19-T18-D18"],146:["T19-T19-D16","T20-T18-D16"],145:["T20-T15-D20","T20-T19-D14"],144:["T20-T20-D12","T18-T18-D18"],143:["T20-T17-D16","T19-T18-D16"],142:["T20-T14-D20","T19-T15-D20","T17-T17-D20"],141:["T20-T19-D12","T20-T15-D18","T19-T16-D18","T17-T18-D18"],140:["T20-T20-D10","T20-D20-D20","T18-T18-D16"],139:["T19-T14-D20","T20-T13-D20","T19-D25-D16"],138:["T20-T18-D12","T19-T19-D12","T19-T15-D18"],137:["T20-T19-D10","T20-T15-D16"],136:["T20-T16-D14","T20-T20-D8","T20-D18-D20"],135:["D25-T15-D20","T20-T17-D12"],134:["T20-T14-D16","T17-T17-D16","T20-T16-D13"],133:["T20-T19-D8","T20-T15-D14"],132:["T20-T16-D12","D25-T14-D20","S25-T19-D25","D25-D25-D16"],131:["T19-T14-D16","T20-T13-D16","T17-D20-D20"],130:["T20-T20-D5","T20-S20-D25"],129:["T19-T16-D12","T19-T12-D18","T20-T19-D6","T20-S19-D25"],128:["T18-T14-D16","T18-T18-D10","T20-S18-D25"],127:["T20-T17-D8","T19-S20-D25","T20-S17-D25"],126:["T19-T19-D6","T19-S19-D25"],125:["T20-S25-D20","T18-T13-D16","T15-D20-D20","D25-S25-D25"],124:["T20-D16-D16","T20-T14-D11","S20-T18-D25"],123:["T19-T16-D9","S19-T18-D25"],122:["T18-T18-D7","D25-T16-D12","S18-T18-D25"],121:["T20-T11-D14","T17-T20-D5","S20-T17-D25","S17-T18-D25"],120:["T20-S20-D20","S20-D25-D25"],119:["T19-T12-D13"],118:["T20-S18-D20","T17-T17-D8","S17-T17-D25"],117:["T20-S17-D20","T19-S20-D20"],116:["T19-S20-D20","T20-S16-D20","S20-T20-D18"],115:["T19-S18-D20","20-S15-D20","S20-T19-D19"],114:["T20-S14-D20","T19-S17-D20"],113:["T19-S16-D20","T20-S13-D20"],112:["T20-S12-D20","T20-S20-D16","T19-S19-D18","T18-S18-D20"],111:["T19-S14-D20","T20-S11-D20","S20-T17-D20"],110:["T20-D25","T20-S10-D20","T20-S18-D16"],109:["T20-S9-D20","T20-S17-D16"],108:["T20-S8-D20","T20-S16-D16","T19-S19-D16","T18-S14-D20","T18-S18-D18","T17-S17-D20"],107:["T19-D25","T20-S6-D20","T20-S10-D18"],106:["T20-S6-D20","T20-S10-D18"],105:["T19-S8-D20","T19-S16-D16","T20-S13-D16","T20-S5-D20"],104:["T18-D25","T16-S16-D20","T19-S15-D16","T18-S10-D20"],103:["T19-S6-D20","T19-S10-D18","T17-S12-D20"],102:["T16-S14-D20","T20-S10-D16","T20-S6-D18"],101:["T17-D25","T20-S9-D16","T20-S1-D20","T19-S12-D16"],100:["T20-D20"],99:["T19-S10-D16","T17-S16-D16"],98:["T20-D19"],97:["T19-D20"],96:["T20-D18"],95:["T19-D19"],94:["T18-D20"],93:["T19-D18"],92:["T20-D16"],91:["T17-D20"],90:["T20-D15","T18-D18"],89:["T19-D16"],88:["T20-D14","T16-D20"],87:["T17-D18"],86:["T18-D16"],85:["T15-D20","T19-D14"],84:["T20-D12","T16-D18"],83:["T17-D16"],82:["T14-D20","D25-D16"],81:["T19-D12","T15-D18"],80:["T20-D10","D20-D20"],79:["T19-D11","T13-D20"],78:["T18-D12"],77:["T19-D10","T15-D16"],76:["T16-D14","T20-D8","D18-D20"],75:["T17-D12","T13-D18","S25-D25"],74:["T14-D16","T16-D13","T18-D10"],73:["T19-D8","T15-D14","T11-D20"],72:["T16-D12","T12-D18","T20-D6"],71:["T13-D16","T17-D10","T19-D7","T13-D16"],70:["T18-D8","T10-D20","T20-D5","S20-D25"],69:["T15-D12","T19-D6","S19-D25"],68:["T12-D16","T16-D10","T20-D4","T18-D7"],67:["T9-D20","T17-D8"],66:["T10-D18","T18-D6","T14-D12","T16-D9"],65:["T11-D16","T15-D10","T19-D4","S25-D20"],64:["T16-D8","T8-D20","S16-S16-D16","D16-D16"],63:["T13-D12","T17-D6"],62:["T10-D16","T14-D10","T18-D4"],61:["S25-D18","T7-D20","T15-D8","T11-D14"],60:["S20-D20"],59:["S19-D20"],58:["S18-D20"],57:["S17-D20"],56:["S16-D20","T16-D4"],55:["S15-D20"],54:["S14-D20"],53:["S13-D20","S17-D18"],52:["S12-D20","S20-D16","T12-D8"],51:["S11-D20","S19-D16","S15-D18"],50:["D25","S10-D20","S18-D16","T10-D10"],49:["S9-D20","S17-D16"],48:["S8-D20","S16-D16"],47:["S15-D16","S7-D20"],46:["S6-D20","S14-D16","S10-D18"],45:["S13-D16","S5-D20"],44:["S12-D16","S4-D20"],43:["S11-D16","S3-D20"],42:["S10-D16","S6-D18"],41:["S9-D16","S1-D20"],40:["D20"],39:["S7-D16","S19-D10"],38:["D19"],37:["S5-D16"],36:["D18"],35:["S3-D16"],34:["D17"],33:["S1-D16","S17-D8"],32:["S16"],31:["S15-D8","S7-D12"],30:["D15"],29:["S13-D8","S5-D12"],28:["D14"],27:["S19-D4","S7-D10"],26:["D13"],25:["S9-D8"],24:["D12"],23:["S7-D8"],22:["D11"],21:["S13-D4","S5-D8"],20:["D10"],19:["S11-D4","S3-D8"],18:["D9"],17:["S9-D4","S1-D8"],16:["D8"],15:["S7-D4"],14:["D7"],13:["S5-D4"],12:["D6"],11:["S3-D4"],10:["D5"],9:["S1-D4"],8:["D4"],7:["S3-D2"],6:["D3"],5:["S1-D2"],4:["D2"],3:["S1-D1"],2:["D1"]},W=(t(42),function(){var e=Object(r.useContext)(j),a=e.match,t=e.updateCurrentThrowManual,l=e.onClickValidateThrow,c=e.getCurrentThrowScore,o=e.loading,m=e.error,u=e.resetError,s=Object(r.useState)(a.matchPlayerInfo[a.players[a.currentPlayerTurn]].score),T=Object(d.a)(s,2),i=T[0],h=T[1],y=Object(r.useState)(!1),p=Object(d.a)(y,2),S=p[0],f=p[1];Object(r.useEffect)((function(){var e=c(),t=a.players[a.currentPlayerTurn],r=a.matchPlayerInfo[t].score;h(r-e)}),[a.currentThrow]),Object(r.useEffect)((function(){var e=a.players[a.currentPlayerTurn];a.hasWinner&&L(a,e)}),[a.hasWinner]),Object(r.useEffect)((function(){setTimeout((function(){u()}),12e3)}),[m]);var g=function(e){var r=Number(e.target.name.split("-")[1])-1;if(r>0)for(var n=0;n<r;n++)if(""===a.currentThrow[n])return void console.log("erreur need previous dart score");t(e.target.value,r)};return n.a.createElement(r.Fragment,null,S&&n.a.createElement(E,{isDiv:!0,header:"How to manually add a dart score?",footer:n.a.createElement(r.Fragment,null,n.a.createElement("button",{onClick:function(){return f(!1)}},"GOT IT"))},n.a.createElement("p",null,"If you missed, simply enter 0.",n.a.createElement("br",null),"For any other scores add:",n.a.createElement("br",null),'"S" (for a single), "D" (for a double)',n.a.createElement("br",null),'or "T" (for a treble) before your score.',n.a.createElement("br",null),'So "D10" scores 20 points, "T20" scores 60 ...',n.a.createElement("br",null),"Note that:",n.a.createElement("br",null),'the inner BULLSEYE (50 points) = "D25"',n.a.createElement("br",null),'and the outer BULLSEYE (25 points) = "S25".')),n.a.createElement("div",null,a.hasWinner&&n.a.createElement("p",null,a.players[a.currentPlayerTurn]),!a.hasWinner&&n.a.createElement(r.Fragment,null,n.a.createElement("div",null,n.a.createElement("h2",null,"It's your Turn"),n.a.createElement("h3",null,a.players[a.currentPlayerTurn]),n.a.createElement("p",null,1===i||i<0?"BUST":i),M[i]&&n.a.createElement("div",null,n.a.createElement("p",null,"Checkout"),n.a.createElement("ul",null,M[i].map((function(e){return n.a.createElement("li",null,e)}))))),n.a.createElement("div",null,n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l(i)}},n.a.createElement("h2",null,"Click on the dartboard ",n.a.createElement("br",null),"or",n.a.createElement("br",null),"enter your score manualy"," ",n.a.createElement("i",{onClick:function(){return f(!0)},class:"far fa-question-circle",style:{cursor:"pointer"}})),n.a.createElement("div",null,n.a.createElement(D,{element:"input",type:"text",name:"dart-1",htmlFor:"dart-1",label:"Dart 1",value:a.currentThrow[0],placeholder:"Enter score",onChange:g})),n.a.createElement("div",null,(1!==i&&i>0||""!==a.currentThrow[1].trim()||""===a.currentThrow[1].trim()&&""!==a.currentThrow[2].trim())&&n.a.createElement(D,{element:"input",type:"text",name:"dart-2",htmlFor:"dart-2",label:"Dart 2",value:a.currentThrow[1],placeholder:"Enter score",onChange:g})),n.a.createElement("div",null,(1!==i&&i>0||""!==a.currentThrow[2].trim())&&n.a.createElement(D,{element:"input",type:"text",name:"dart-3",htmlFor:"dart-3",label:"Dart 3",value:a.currentThrow[2],placeholder:"Enter score",onChange:g})),o.validateThrow?n.a.createElement(b,{spinnerContClassName:"spinner-cont-large",spinnerImgClassName:"spinnerSmall"}):n.a.createElement("button",{type:"submit"},"Validate"),m&&"throw-validation"===m.errorFor&&n.a.createElement("p",null,m.message)))),n.a.createElement("div",null,n.a.createElement("h2",null,a.players[a.currentPlayerTurn]," stats"),n.a.createElement(C,{currentPlayerInfos:a.matchPlayerInfo[a.players[a.currentPlayerTurn]]}))))}),U=(t(43),t(22)),H=t.n(U),F={D20:[354,104,400,100,445,104,442,121,400,118,357,121],D1:[448,105,490,114,537,133,528,150,481,130,445,122],D18:[537,133,577,157,612,189,599,202,563,171,528,150],D4:[612,189,643,224,667,265,651,273,628,234,599,202],D13:[667,265,684,305,696,354,679,357,666,309,651,273],D6:[696,354,700,405,697,447,679,445,681,399,679,357],D10:[697,447,686,490,667,536,651,527,667,486,679,445],D15:[667,536,642,577,611,612,599,599,631,560,651,527],D2:[611,612,575,644,535,667,528,650,568,624,599,599],D17:[535,667,492,685,447,695,443,678,485,668,528,650],D3:[447,695,398,699,353,695,356,678,400,680,443,678],D19:[353,695,303,684,263,667,271,651,310,666,356,678],D7:[263,667,220,640,187,613,200,600,230,623,271,651],D16:[187,613,156,576,131,537,149,528,169,561,200,600],D8:[131,537,112,490,102,447,121,444,131,484,149,528],D11:[102,447,94,400,102,353,121,356,117,400,121,444],D14:[102,353,114,304,130,264,147,273,130,317,121,356],D9:[130,264,152,226,187,188,200,201,170,236,147,273],D12:[187,188,222,159,263,132,272,150,234,173,200,201],D5:[263,132,307,115,352,104,356,122,316,131,272,150],T20:[371,215,398,212,429,215,427,233,400,231,374,232],T1:[429,215,457,221,486,233,478,250,451,239,427,233],T18:[486,233,512,248,533,268,520,281,499,264,478,250],T4:[533,268,553,291,567,317,552,325,537,300,520,281],T13:[567,317,580,341,586,372,568,374,560,349,552,325],T6:[586,372,588,401,586,431,569,428,569,401,568,374],T10:[586,431,580,457,568,486,552,478,561,454,569,428],T15:[568,486,552,511,533,534,519,521,539,500,552,478],T2:[533,534,510,553,485,567,477,552,500,538,519,521],T17:[485,567,456,580,429,586,426,568,449,563,477,552],T3:[429,586,400,589,371,586,373,568,400,570,426,568],T19:[371,586,337,577,313,567,322,551,346,561,373,568],T7:[313,567,286,550,266,534,279,520,297,536,322,551],T16:[266,534,246,507,231,485,247,477,259,498,279,520],T8:[231,485,219,457,213,430,232,427,238,452,247,477],T11:[213,430,210,399,213,370,232,373,229,399,232,427],T14:[213,370,220,339,231,315,248,324,238,349,232,373],T9:[231,315,248,289,267,267,280,280,261,300,248,324],T12:[267,267,287,248,314,233,323,249,300,262,280,280],T5:[314,233,344,222,371,215,374,232,346,239,323,249]},B={S20:[354,104,400,100,445,104,404,369,395,369],S1:[448,105,490,114,537,133,414,372,404,369],S18:[537,133,577,157,612,189,422,377,414,372],S4:[612,189,643,224,667,265,430,386,422,377],S13:[667,265,684,305,696,354,433,395,430,386],S6:[696,354,700,405,697,447,433,406,433,395],S10:[697,447,686,490,667,536,430,416,433,406],S15:[667,536,642,577,611,612,423,424,430,416],S2:[611,612,575,644,535,667,415,429,423,424],S17:[535,667,492,685,447,695,405,433,415,423],S3:[447,695,398,699,353,695,396,433,405,433],S19:[353,695,303,684,263,667,386,429,396,433],S7:[263,667,220,640,187,613,379,424,386,429],S16:[187,613,156,576,131,537,372,415,379,424],S8:[131,537,112,490,102,447,369,406,372,415],S11:[102,447,94,400,102,353,370,396,369,406],S14:[102,353,114,304,130,264,371,388,370,396],S9:[130,264,152,226,187,188,378,379,371,388],S12:[187,188,222,159,263,132,385,374,378,379],S5:[263,132,307,115,352,104,395,369,385,374]},x=function(){var e=Object(r.useContext)(j),a=e.match,t=e.updateCurrentThrowDartBoard,l=e.throwError,c=e.getCurrentThrowScore,o=function(e){var r=c(),n=a.players[a.currentPlayerTurn];a.matchPlayerInfo[n].score-r<=1?l("You can't throw any more dart","throw-validation"):t(e.target.id)};return n.a.createElement("div",null,n.a.createElement("img",{src:H.a,alt:"dart board",useMap:"#dartboard"}),n.a.createElement("map",{name:"dartboard"},n.a.createElement("area",{id:"D25",shape:"circle",coords:"400,400,14",onClick:o,alt:"D20"}),n.a.createElement("area",{id:"S25",shape:"circle",coords:"400,400,28",onClick:o,alt:"S25"}),Object.entries(F).map((function(e){var a=Object(d.a)(e,2),t=a[0],r=a[1];return n.a.createElement("area",{key:t,id:t,shape:"poly",coords:r.join(),onClick:o,alt:t})})),Object.entries(B).map((function(e){var a=Object(d.a)(e,2),t=a[0],r=a[1];return n.a.createElement("area",{key:t,id:t,shape:"poly",coords:r.join(),onClick:o,alt:t})}))))},Y=function(e){var a=e.nbrOfMatches,t=e.matchesWon,r=e.soloGames;return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("p",null,"Matches played:"),n.a.createElement("p",null,a)),n.a.createElement("div",null,n.a.createElement("p",null,"Matches won:"),n.a.createElement("p",null,t)),n.a.createElement("div",null,n.a.createElement("p",null,"Solo game:"),n.a.createElement("p",null,r)))},V=function(e){var a=e.playerStats,t=a.name,l=a.nbrOfMatches,c=a.matchesWon,o=a.soloGames,m=a.averages,u=a.bestThreeDarts,s=a.scoreRanges,T=a.hit,i=a.doubleOut,h=a.checkoutScores,y=a.totalThrow,d=e.playerName,D=e.isMatchStats,p=e.isStatsPage;return n.a.createElement("div",null,p&&n.a.createElement(r.Fragment,null,n.a.createElement("h2",null,t),n.a.createElement(Y,{nbrOfMatches:l,matchesWon:c,soloGames:o})),D&&n.a.createElement("h2",null,d),n.a.createElement(I,{averages:m,bestThreeDarts:u}),n.a.createElement("div",null,Object.keys(s).length>0&&n.a.createElement(R,{title:"Score ranges:",object:s,totalThrow:y.rounds,displayPercentage:!0}),Object.keys(T).length>0&&n.a.createElement(R,{title:"Sections hit:",object:T,totalThrow:y.darts,displayPercentage:!0}),Object.keys(i).length>0&&n.a.createElement(R,{title:"Double Out success rate:",object:i,isDoubleOut:!0}),Object.keys(h).length>0&&n.a.createElement(R,{title:"Successful checkout score:",object:h})))},q=(t(44),function(){var e=Object(r.useContext)(j);return e.loading.initGameLoading?n.a.createElement(b,{spinnerContClassName:"spinner-cont-large",spinnerImgClassName:"spinnerSmall"}):e.match.gameIsRunning?n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"game-container"},n.a.createElement(x,null),n.a.createElement(W,null),n.a.createElement(w,null)),n.a.createElement("div",{className:"game-stats-container"},n.a.createElement("h3",null,"stats"),n.a.createElement("div",null,e.match.players.map((function(a){return n.a.createElement(V,{playerStats:e.match.matchPlayerInfo[a],playerName:a,isMatchStats:!0})}))))):n.a.createElement("div",null,n.a.createElement("p",null,"You need to initialise a new game"))}),J=(t(45),function(){var e=P.getAllPlayersName,a=P.getSinglePlayerData,t=Object(r.useState)({playerName:void 0}),l=Object(d.a)(t,2),c=l[0],o=l[1],m=Object(r.useState)(void 0),u=Object(d.a)(m,2),s=u[0],T=u[1],i=Object(r.useState)([]),p=Object(d.a)(i,2),E=p[0],S=p[1],f=Object(r.useState)(!0),g=Object(d.a)(f,2),O=g[0],v=g[1];if(Object(r.useEffect)((function(){S(e())}),[]),Object(r.useEffect)((function(){E&&(v(!1),o(Object(y.a)({},c,{playerName:E[0]?E[0]:void 0})))}),[E]),O)return n.a.createElement(b,{spinnerContClassName:"spinner-cont-large",spinnerImgClassName:"spinnerSmall"});return n.a.createElement("div",null,E&&E.length?n.a.createElement("div",null,n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),T(a(c.playerName))}},n.a.createElement(D,{element:"select",name:"playerName",htmlFor:"playerName",label:"Pick a player",value:c.playerName,onChange:function(e){o(Object(y.a)({},c,Object(h.a)({},e.target.name,e.target.value)))}},E.map((function(e){return n.a.createElement("option",{key:"player-name-stat-".concat(e),value:e},e)}))),n.a.createElement("button",{type:"submit"},"See Stats"))):n.a.createElement("h2",null,"You do not have any saved player. Create one play a game and come back after."),s&&n.a.createElement(V,{playerStats:s,isStatsPage:!0}))}),z=function(e,a){switch(a.type){case"INIT_NEW_GAME":return Object(y.a)({},e,{match:Object(y.a)({},a.payload)});case"UPDATE_CURRENT_THROW":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{currentThrow:a.payload})});case"PUSH_TO_CURRENT_LEG_THROWS":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{currentLegThrows:[].concat(Object(i.a)(e.match.currentLegThrows),[a.payload])})});case"RESET_CURRENT_THROW":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{currentThrow:["","",""]})});case"SAVE_CURRENT_LEG_THROWS":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{allLegsThrows:[].concat(Object(i.a)(e.match.allLegsThrows),[a.payload])})});case"RESET_CURRENT_LEG_THROWS":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{currentLegThrows:[]})});case"UPDATE_PLAYER_SCORE":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload.playerName,Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName],{score:a.payload.score})))})});case"RESET_SCORES":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload,Object(y.a)({},e.match.matchPlayerInfo[a.payload],{score:e.match.gameType})))})});case"UPDATE_AVERAGES":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload.playerName,Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName],{averages:Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName].averages,Object(h.a)({overall:a.payload.newOverallAverage},a.payload.gamePeriod,a.payload.newGamePeriodAvg))})))})});case"INCREMENT_TOTAL_THROW":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload.playerName,Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName],Object(h.a)({totalThrow:Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName].totalThrow,{darts:e.match.matchPlayerInfo[a.payload.playerName].totalThrow.darts+a.payload.dartNumber,rounds:e.match.matchPlayerInfo[a.payload.playerName].totalThrow.rounds+1})},a.payload.gamePeriod,Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName][a.payload.gamePeriod],{darts:e.match.matchPlayerInfo[a.payload.playerName][a.payload.gamePeriod].darts+a.payload.dartNumber,rounds:e.match.matchPlayerInfo[a.payload.playerName][a.payload.gamePeriod].rounds+1})))))})});case"UPDATE_BEST_THREE_DARTS":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload.playerName,Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName],{bestThreeDarts:a.payload.score})))})});case"UPDATE_CHECKOUT_SCORE":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload.playerName,Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName],{checkoutScores:a.payload.checkoutScores})))})});case"UPDATE_SECTION_HIT":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload.playerName,Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName],{hit:a.payload.hit})))})});case"UPDATE_SCORE_RANGES":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload.playerName,Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName],{scoreRanges:a.payload.scoreRanges})))})});case"UPDATE_DOUBLE_OUT":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload.playerName,Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName],{doubleOut:a.payload.doubleOut})))})});case"INCREMENT_LEG_WON":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload.playerName,Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName],{currentSetLegWon:e.match.matchPlayerInfo[a.payload.playerName].currentSetLegWon+1})))})});case"INCREMENT_SET_WON":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload.playerName,Object(y.a)({},e.match.matchPlayerInfo[a.payload.playerName],{setWon:e.match.matchPlayerInfo[a.payload.playerName].setWon+1})))})});case"RESET_PLAYER_LEG":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload,Object(y.a)({},e.match.matchPlayerInfo[a.payload],{currentSetLegWon:0})))})});case"CHANGE_CURRENT_PLAYER":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{currentPlayerTurn:a.payload})});case"CHANGE_STARTING_PLAYER_SET":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{currentPlayerTurn:a.payload,startingPlayerLeg:a.payload,startingPlayerSet:a.payload})});case"CHANGE_STARTING_PLAYER_LEG":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{currentPlayerTurn:a.payload,startingPlayerLeg:a.payload})});case"GAME_HAS_WINNER":return Object(y.a)({},e,{match:Object(y.a)({},e.match,{hasWinner:!0,matchPlayerInfo:Object(y.a)({},e.match.matchPlayerInfo,Object(h.a)({},a.payload,Object(y.a)({},e.match.matchPlayerInfo[a.payload],{hasWonMatch:!0})))})});case"SET_LOADING":return Object(y.a)({},e,{loading:Object(y.a)({},e.loading,Object(h.a)({},a.payload.eventName,a.payload.setTo))});case"THROW_ERROR":return Object(y.a)({},e,{error:{message:a.payload.message,errorFor:a.payload.errorFor}});case"RESET_ERROR":return Object(y.a)({},e,{error:null});default:return Object(y.a)({},e)}},K=function(e){var a={match:Object(y.a)({},g.matchModel),loading:{initGameLoading:!1,validateThrow:!1},error:null},t=Object(r.useReducer)(z,a),l=Object(d.a)(t,2),c=l[0],o=l[1],m=function(e){b(),P(),I(),O(e)},u=function(){b(!0),P(),I(!0)},s=function(e){if(0===Number(e)||""===e)return!0;if(/^[SDT]\d{1,2}$/i.test(e)){var a=Number(e.slice(1));if(a>=1&&a<=20||/[SD]25/i.test(e))return!0}return!1},T=function(e,a){var t=e.filter((function(e){return""===e.trim()}));return!(a>1&&t.length||""===e[0]||""===e[1]&&""!==e[2])||(H("You need add a value for each dart","throw-validation"),!1)},h=function(){var e=c.match.currentThrow;return""===e[2].trim()&&""===e[1].trim()?!!/^d/i.test(e[0]):""===e[2].trim()?!!/^d/i.test(e[1]):!!/^d/i.test(e[2])},D=function(){return Object(i.a)(c.match.currentThrow).reduce((function(e,a){if(!s(a))return e+0;if(0===Number(a)||""===a)return e+0;var t=Number(a.slice(1));return t>=1&&t<=20||/[SD]25/i.test(a)?(/t/i.test(a[0])&&(t*=3),/d/i.test(a[0])&&(t*=2),e+t):e+0}),0)},p=function(){var e=c.match.players[c.match.currentPlayerTurn];o({type:"PUSH_TO_CURRENT_LEG_THROWS",payload:{playerName:e,darts:c.match.currentThrow.filter((function(e){return""!==e.trim()}))}})},E=function(e){console.log(e),o({type:"SAVE_CURRENT_LEG_THROWS",payload:e})},S=function(){return o({type:"RESET_CURRENT_THROW"})},f=function(){return o({type:"RESET_CURRENT_LEG_THROWS"})},b=function(){var e,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=c.match.players[c.match.currentPlayerTurn],r=c.match.matchPlayerInfo[t].totalThrow.rounds,n=c.match.matchPlayerInfo[t].averages.overall,l=a?0:D(),m=(n*r+l)/(r+1),u=c.match.matchPlayerInfo[t].score>140?"begMidGame":"endGame";if("begMidGame"===u){var s=c.match.matchPlayerInfo[t].totalThrowBegMidGame.rounds,T=c.match.matchPlayerInfo[t].averages.begMidGame;e=(T*s+l)/(s+1)}else{var i=c.match.matchPlayerInfo[t].totalThrowEndGame.rounds,h=c.match.matchPlayerInfo[t].averages.endGame;e=(h*i+l)/(i+1)}o({type:"UPDATE_AVERAGES",payload:{playerName:t,newOverallAverage:m,gamePeriod:u,newGamePeriodAvg:e}})},O=function(e){var a=c.match.players[c.match.currentPlayerTurn];o({type:"UPDATE_PLAYER_SCORE",payload:{playerName:a,score:e}})},v=function(){c.match.players.forEach((function(e){o({type:"RESET_SCORES",payload:e})}))},P=function(){var e=c.match.players[c.match.currentPlayerTurn],a=c.match.currentThrow.filter((function(e){return""!==e.trim()})).length,t=c.match.matchPlayerInfo[e].score>140?"totalThrowBegMidGame":"totalThrowEndGame";o({type:"INCREMENT_TOTAL_THROW",payload:{playerName:e,dartNumber:a,gamePeriod:t}})},N=function(){var e=D(),a=c.match.players[c.match.currentPlayerTurn];e>c.match.matchPlayerInfo[a].bestThreeDarts&&o({type:"UPDATE_BEST_THREE_DARTS",payload:{playerName:a,score:e}})},_=function(){var e=D(),a=c.match.players[c.match.currentPlayerTurn],t=Object(y.a)({},c.match.matchPlayerInfo[a].checkoutScores);t.hasOwnProperty(e)?t[e]++:t[e]=1,o({type:"UPDATE_CHECKOUT_SCORE",payload:{playerName:a,checkoutScores:t}})},w=function(){var e=c.match.players[c.match.currentPlayerTurn],a=Object(y.a)({},c.match.matchPlayerInfo[e].hit);c.match.currentThrow.forEach((function(e){""!==e.trim()&&(0===Number(e)?a.hasOwnProperty("Missed")?a.Missed++:a.Missed=1:a.hasOwnProperty(e.toUpperCase())?a[e.toUpperCase()]++:a[e.toUpperCase()]=1)})),o({type:"UPDATE_SECTION_HIT",payload:{playerName:e,hit:a}})},I=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=c.match.players[c.match.currentPlayerTurn],t=D(),r=Object(y.a)({},c.match.matchPlayerInfo[a].scoreRanges);function n(e){r.hasOwnProperty(e)?r[e]++:r[e]=1}n(e?"Busted":0===t?"ZERO":t<20?"1-19":t<40?"20-39":t<60?"40-59":t<80?"60-79":t<100?"80-99":t<120?"100-119":t<140?"120-139":t<160?"140-159":t<180?"160-179":"180"),o({type:"UPDATE_SCORE_RANGES",payload:{playerName:a,scoreRanges:r}})},R=function(){var e=c.match.players[c.match.currentPlayerTurn],a=Object(i.a)(c.match.currentThrow).filter((function(e){return""!==e.trim()})),t=Object(y.a)({},c.match.matchPlayerInfo[e].doubleOut),r=c.match.matchPlayerInfo[e].score-0;a.forEach((function(e){var a;if(0===Number(e))a=0;else{var n=Number(e.slice(1));/t/i.test(e[0])&&(n*=3),/d/i.test(e[0])&&(n*=2),a=n}if((r<=40&&r>=2||50===r)&&r%2===0){var l=r/2,c=r-a===0&&/d/i.test(e[0]);t.hasOwnProperty(l)?(t[l].total++,!c&&t[l].miss++,c&&t[l].hit++):t[l]={total:1,miss:c?0:1,hit:c?1:0}}r-=a})),o({type:"UPDATE_DOUBLE_OUT",payload:{playerName:e,doubleOut:t}})},C=function(){var e=c.match.players[c.match.currentPlayerTurn];o({type:"INCREMENT_LEG_WON",payload:{playerName:e}})},G=function(){var e=c.match.players[c.match.currentPlayerTurn];o({type:"INCREMENT_SET_WON",payload:{playerName:e}})},A=function(){c.match.players.forEach((function(e){o({type:"RESET_PLAYER_LEG",payload:e})}))},k=function(){var e=c.match.players[c.match.currentPlayerTurn];return c.match.matchPlayerInfo[e].currentSetLegWon+1===c.match.legs},L=function(){var e=c.match.players[c.match.currentPlayerTurn];return c.match.matchPlayerInfo[e].setWon+1===c.match.sets},M=function(e,a){var t=c.match.currentPlayerTurn,r=c.match.startingPlayerLeg,n=c.match.startingPlayerSet,l=c.match.numberOfPlayers;if(e){if(a){o({type:"CHANGE_STARTING_PLAYER_SET",payload:n+1>=l?0:n+1})}else if(e){o({type:"CHANGE_STARTING_PLAYER_LEG",payload:r+1>=l?0:r+1})}}else o({type:"CHANGE_CURRENT_PLAYER",payload:t+1>=l?0:t+1})},W=function(){var e=c.match.players[c.match.currentPlayerTurn];o({type:"GAME_HAS_WINNER",payload:e})},U=function(e,a){return o({type:"SET_LOADING",payload:{eventName:e,setTo:a}})},H=function(e,a){o({type:"THROW_ERROR",payload:{message:e,errorFor:a}})};return n.a.createElement(j.Provider,{value:{match:c.match,loading:c.loading,error:c.error,initNewGame:function(e){U("initGameLoading",!0);var a=Object(y.a)({},c.match,{},e);o({type:"INIT_NEW_GAME",payload:a}),U("initGameLoading",!1)},onClickValidateThrow:function(e){U("validateThrow",!0);for(var a=Object(i.a)(c.match.currentThrow),t=[].concat(Object(i.a)(c.match.currentLegThrows),[{darts:a,playerName:c.match.players[c.match.currentPlayerTurn]}]),r=!1,n=!1,l=!1,o=0;o<a.length;o++)if(!s(a[o]))return H("One or more of your dart has an invalid value","throw-validation"),void U("validateThrow",!1);if(T(a,e)){if(1===e||e<0)u();else if(0===e){h()?(E(t),_(),m(e),(n=k())?(l=L(),G(),A()):C(),console.log(l),r=!0,f()):u()}else m(e);if(N(),w(),R(),!r&&p(),S(),r&&v(),l)return alert("YOU WIN"),W(),void U("validateThrow",!1);M(r,n),U("validateThrow",!1)}else U("validateThrow",!1)},updateCurrentThrowManual:function(e,a){var t=c.match.currentThrow.map((function(t,r){return r===a&&(t=e),t}));o({type:"UPDATE_CURRENT_THROW",payload:t})},updateCurrentThrowDartBoard:function(e){for(var a=Object(i.a)(c.match.currentThrow),t=0;t<a.length;t++)if(""===a[t]){a[t]=e;break}o({type:"UPDATE_CURRENT_THROW",payload:a})},validateDartValue:s,getCurrentThrowScore:D,throwError:H,resetError:function(){return o({type:"RESET_ERROR"})}}},e.children)};var Z=function(){return Object(r.useEffect)((function(){localStorage.getItem("darts501scoring")||localStorage.setItem("darts501scoring",JSON.stringify({}))}),[]),n.a.createElement(K,null,n.a.createElement(o.a,null,n.a.createElement(T,null),n.a.createElement("main",null,n.a.createElement(m.c,null,n.a.createElement(m.a,{path:"/dart-scoring",exact:!0},n.a.createElement(N,null)),n.a.createElement(m.a,{path:"/dart-scoring/game",exact:!0},n.a.createElement(q,null)),n.a.createElement(m.a,{path:"/dart-scoring/stats",exact:!0},n.a.createElement(J,null))))))};c.a.render(n.a.createElement(Z,null),document.getElementById("root"))}]),[[23,1,2]]]);
//# sourceMappingURL=main.6a53cecf.chunk.js.map